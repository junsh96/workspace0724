--계정 생성 및 권한 부여
CREATE USER c##ONLINE IDENTIFIED BY ONLINE;


GRANT CONNECT, RESOURCE TO c##ONLINE;

ALTER USER C##ONLINE DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS;


--T_TEACHER 테이블 생성
CREATE TABLE T_TEACHER(
    TEACHER_ID NUMBER PRIMARY KEY ,
    NAME VARCHAR2(20),
    EMAIL VARCHAR2(50) UNIQUE,
    HIRE_DATE DATE,
    SUBJECT VARCHAR2(30)
);
--컬럼 주석추가
COMMENT ON COLUMN "T_TEACHER"."TEACHER_ID" IS '강사 고유번호';
COMMENT ON COLUMN "T_TEACHER"."NAME" IS '강사 이름';
COMMENT ON COLUMN "T_TEACHER"."EMAIL" IS '이메일';
COMMENT ON COLUMN "T_TEACHER"."HIRE_DATE" IS '입사일';
COMMENT ON COLUMN "T_TEACHER"."SUBJECT" IS '전공 분야';

--T_LECTURE 테이블 생성
CREATE TABLE T_LECTURE(
    LECTURE_ID NUMBER PRIMARY KEY,
    TITLE VARCHAR2(50),
    TEACHER_ID NUMBER REFERENCES T_TEACHER(TEACHER_ID),
    INDEX_COUNT NUMBER DEFAULT 0,
    CATEGORY VARCHAR2(20),
    START_DATE DATE,
    END_DATE DATE
);
--컬럼 주석추가
COMMENT ON COLUMN "T_LECTURE"."LECTURE_ID" IS '강의 고유번호';
COMMENT ON COLUMN "T_LECTURE"."TITLE" IS '강의 제목';
COMMENT ON COLUMN "T_LECTURE"."TEACHER_ID" IS '강의 담당 강사 번호';
COMMENT ON COLUMN "T_LECTURE"."INDEX_COUNT" IS '수강인원';
COMMENT ON COLUMN "T_LECTURE"."CATEGORY" IS '강의 분류';
COMMENT ON COLUMN "T_LECTURE"."START_DATE" IS '강의 시작일';
COMMENT ON COLUMN "T_LECTURE"."END_DATE" IS '강의 종료일';

--T_STUDENT 테이블 생성
CREATE TABLE T_STUDENT(
    STUDENT_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(20),
    GRADE NUMBER,
    EMAIL VARCHAR2(50),
    JOIN_DATE DATE
);
--컬럼 주석추가
COMMENT ON COLUMN "T_STUDENT"."STUDENT_ID" IS '수강생 고유번호';
COMMENT ON COLUMN "T_STUDENT"."NAME" IS '수강생 이름';
COMMENT ON COLUMN "T_STUDENT"."GRADE" IS '수강등급';
COMMENT ON COLUMN "T_STUDENT"."EMAIL" IS '수강생 이메일';
COMMENT ON COLUMN "T_STUDENT"."JOIN_DATE" IS '등록일';



--T_ENOLLMENT 테이블 생성
CREATE TABLE T_ENOLLMENT(
    ENROLL_ID NUMBER PRIMARY KEY,
    STUDENT_ID NUMBER REFERENCES T_STUDENT(STUDENT_ID),
    LECTURE_ID NUMBER REFERENCES T_LECTURE(LECTURE_ID),
    ENROLL_DATE DATE,
    STATUS CHAR(1) CHECK(STATUS IN ('Y','N')),
    GRADE_SCORE NUMBER
);
--컬럼 주석추가
COMMENT ON COLUMN "T_ENOLLMENT"."ENROLL_ID" IS '수강기록 고유번호';
COMMENT ON COLUMN "T_ENOLLMENT"."STUDENT_ID" IS '수강생ID';
COMMENT ON COLUMN "T_ENOLLMENT"."LECTURE_ID" IS '강의 ID';
COMMENT ON COLUMN "T_ENOLLMENT"."ENROLL_DATE" IS '수강 등록일';
COMMENT ON COLUMN "T_ENOLLMENT"."STATUS" IS '수강 상태';
COMMENT ON COLUMN "T_ENOLLMENT"."GRADE_SCORE" IS '성적 점수';


--T_TEACHER 더미 데이터 생성
INSERT INTO T_TEACHER VALUES(1,'강사1','aaa@naver.com','2015/06/06','전공1');
INSERT INTO T_TEACHER VALUES(2,'강사2','bbb@naver.com','2014/09/04','전공2');
INSERT INTO T_TEACHER VALUES(3,'강사3','ccc@naver.com','2016/10/12','전공2');
INSERT INTO T_TEACHER VALUES(4,'강사4','ddd@gmail.com','2020/06/25','전공3');
INSERT INTO T_TEACHER VALUES(5,'강사5','eee@naver.com','2025/04/17','전공2');

--T_LECTURE 더미 데이터 생성
INSERT INTO T_LECTURE VALUES(1,'강의1',1,5,'JAVA','2025/07/23','2025/12/15');
INSERT INTO T_LECTURE VALUES(2,'강의2',2,4,'SQL','2025/08/02','2026/01/05');
INSERT INTO T_LECTURE VALUES(3,'강의3',3,5,'NODE','2025/09/27','2026/02/05');
INSERT INTO T_LECTURE VALUES(4,'강의4',4,3,'AWS','2025/09/15','2025/11/27');
INSERT INTO T_LECTURE VALUES(5,'강의5',5,7,'Android','2025/09/04','2025/12/15');

--T_STUDENT 더미 데이터 생성
INSERT INTO T_STUDENT VALUES(1001,'학생1','3','fff@gmail.com','2025/06/18');
INSERT INTO T_STUDENT VALUES(1002,'학생2','1','ggg@gmail.com','2025/09/09');
INSERT INTO T_STUDENT VALUES(1003,'학생3','2','hhh@gmail.com','2025/09/17');
INSERT INTO T_STUDENT VALUES(1004,'학생4','3','iii@gmail.com','2025/05/01');
INSERT INTO T_STUDENT VALUES(1005,'학생5','4','jjj@gmail.com','2025/07/28');


--T_ENOLLMENT 더미 데이터 생성
INSERT INTO T_ENOLLMENT VALUES(1,1002,1,'2025/07/20','Y',90);
INSERT INTO T_ENOLLMENT VALUES(2,1004,2,'2025/07/25','Y',70);
INSERT INTO T_ENOLLMENT VALUES(3,1001,5,'2025/06/15','N',73);
INSERT INTO T_ENOLLMENT VALUES(4,1005,3,'2025/09/20','Y',62);
INSERT INTO T_ENOLLMENT VALUES(5,1003,4,'2025/06/01','Y',87);
INSERT INTO T_ENOLLMENT VALUES(6,1002,2,'2025/07/20','Y',85);
INSERT INTO T_ENOLLMENT VALUES(7,1002,3,'2025/07/20','Y',95);
INSERT INTO T_ENOLLMENT VALUES(8,1004,1,'2025/07/25','Y',75);
INSERT INTO T_ENOLLMENT VALUES(9,1004,4,'2025/07/25','Y',67);
INSERT INTO T_ENOLLMENT VALUES(10,1001,4,'2025/06/15','N',73);
INSERT INTO T_ENOLLMENT VALUES(11,1001,3,'2025/06/15','N',72);
INSERT INTO T_ENOLLMENT VALUES(12,1001,2,'2025/06/15','N',75);
INSERT INTO T_ENOLLMENT VALUES(13,1001,1,'2025/06/15','Y',78);

INSERT INTO T_ENOLLMENT VALUES(14,1005,3,'2025/09/20','Y',62);
INSERT INTO T_ENOLLMENT VALUES(15,1005,2,'2025/09/21','Y',65);
INSERT INTO T_ENOLLMENT VALUES(16,1005,1,'2025/08/17','N',NULL);
INSERT INTO T_ENOLLMENT VALUES(17,1005,5,'2025/08/31','N',78);



DELETE FROM T_ENOLLMENT;
DELETE FROM T_STUDENT;
DELETE FROM T_LECTURE;